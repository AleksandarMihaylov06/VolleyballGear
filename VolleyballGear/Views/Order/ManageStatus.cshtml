@model VolleyballGear.Models.Order.OrderDetailsVM

@{
    ViewData["Title"] = "Manage Order Status";
}

@section Styles {
        <link rel="stylesheet" href="~/css/ProductDetails.css" asp-append-version="true" />
}

<div class="delete-container">
    <h1>Manage Order Status</h1>

    <div class="order-info" style="background: var(--light); padding: 2rem; border-radius: 15px; margin-bottom: 2rem;">
        <div class="detail-row">
            <div class="detail-label">Order Number</div>
            <div class="detail-value"><strong>#@Model.OrderId</strong></div>
        </div>

        <div class="detail-row">
            <div class="detail-label">Customer</div>
            <div class="detail-value">@Model.UserEmail</div>
        </div>

        <div class="detail-row">
            <div class="detail-label">Order Date</div>
            <div class="detail-value">@Model.OrderDate.ToString("MMMM dd, yyyy")</div>
        </div>

        <div class="detail-row">
            <div class="detail-label">Total Items</div>
            <div class="detail-value">@Model.OrderProducts.Count products</div>
        </div>

        <div class="detail-row">
            <div class="detail-label">Total Amount</div>
            <div class="detail-value">@Model.TotalPrice.ToString("F2") lv.</div>
        </div>

        <div class="detail-row">
            <div class="detail-label">Current Status</div>
            <div class="detail-value">
                @if (Model.Status == VolleyballGear.Data.Domain.OrderStatus.Pending)
                {
                        <span class="status-badge status-pending">Pending</span>
                }
                else if (Model.Status == VolleyballGear.Data.Domain.OrderStatus.Completed)
                {
                        <span class="status-badge status-delivered">Completed</span>
                }
                else if (Model.Status == VolleyballGear.Data.Domain.OrderStatus.Cancelled)
                {
                        <span class="status-badge status-cancelled">Cancelled</span>
                }
            </div>
        </div>
    </div>

    <form method="post" asp-controller="Order" asp-action="ChangeStatus" asp-route-id="@Model.OrderId">
        <div class="form-group" style="margin-bottom: 1.5rem;">
            <label for="Status">Change Status:</label>
            <select id="Status" name="status" class="form-control" style="max-width: 300px;">
                <option value="Pending" selected="@(Model.Status == VolleyballGear.Data.Domain.OrderStatus.Pending)">Pending</option>
                <option value="Completed" selected="@(Model.Status == VolleyballGear.Data.Domain.OrderStatus.Completed)">Completed</option>
                <option value="Cancelled" selected="@(Model.Status == VolleyballGear.Data.Domain.OrderStatus.Cancelled)">Cancelled</option>
            </select>
        </div>

        <div class="form-actions">
            <button type="submit" class="btn btn-primary">Update Status</button>
            <a asp-controller="Order" asp-action="MyOrders" class="btn btn-secondary">Back to Orders</a>
        </div>
    </form>
</div>
